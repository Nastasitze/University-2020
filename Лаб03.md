**Министерство науки и высшего образования Российской Федерации**

**Федеральное государственное бюджетное образовательное учреждение высшего образования**

**«Костромской государственный университет» (КГУ)**

**Институт автоматизированных систем и технологий**

**Направление подготовки: 09.03.02 Информационные системы и технологии**

**Профиль: Информационнные системы и технологии в медиаиндустрии**

**Выполнил студент: Дударева А.Д.**

**Номер группы: 20-ИМбо-3**

**Номер студента: 05**

**Лабораторная работа № 3** 

**Тема: "Управление процессами и загрузкой системы Linux"**

---

#### Раздел 1. Перечень команд

---

> **sudo su** - получили права суперпользователя;

> **lspci** - вывели детальную информацию о всех PCI-шинах и устройствах на них,  с помощью которой определили краткое обозначение сетевой карты и видеодаптера в системе;

> **/var/log/dmesg** - вывели сообщения устройств из файла "dmesg";

> **dmesg | grep eth0** - просмотрели содержимое этого файла с информацией, связанной с интерфейсом eth0;

> **>> myip.sh** - создали файл , где пишем скрипт1:
>  
>  ```javascript
>  #!/bin/bash -   
>  echo "lab4" >>/home/dudsmir/myip.txt  /*записываем сообщение "lab4" в текстовый файл "myip.txt"*/ 
>  ip -4 -br address | grep 'enp' >>/home/dudsmir/myip.txt  /*ищем в файле "enp"*/   
>  /*и записываем список всех IPv4 адресов в текстовый документ "myip.txt";*/
>  ```

> reboot - перезапустили машину, чтобы проверить работоспособность скрипта №1;

> etc/systemd/system/myip.service - создаем сервис с именем "myip.service" (настроили доступ через mc);

> mc - вошли в файловый менеджер (чтобы написать скрипт);

> ```javascript
> [Unit]    /*Содержит общую информацию о сервисе, его описание.*/
>   Description=MyIP  /*Описание юнита; задаем имя*/
>   After=network-online.target  /*Запускать юнит после группы сервисовnetwork-online.target*/
>   Requires=network-online.target  /*Для запуска сервиса необходим запущенный сервис mysql*/
> [Service]  /*Содержит информацию информация о нашем сервисе.*/
>   Type=forking  /*Запускаемый скрипт будет работать в режиме демона*/
>   RemainAfterExit=true  /*Предписывает systemd считать процесс активным после его завершения.*/
>   WorkingDirectory=/home/dudsmir  /*Рабочий каталог, он делается текущим перед запуском стартап команд.*/
>   User=root  /*Пользователь и группа, под которым надо стартовать сервис.*/
>   Group=root  
>   ExecStart=/bin/bash '/opt/dudsmir/myip.sh'  /*Указывает на исполняемый файл нашего сервиса.*/
>   TimeoutSec=300  /*Таймаут в секундах, сколько ждать system отработки старт/стоп команд.*/
> [Install]  /*Содержит информацию о цели, в которой сервис должен стартовать.*/
>   WantedBy=multi-user.target  /*Сервис должен быть запущен, когда будет активирована цель multi–user.target.*/
> ```

> systemctl daemon-reload - перечитали конфигурацию процессов типа daemon;

> systemctl enable myip - включили сервис в список автозагрузки;

> systemctl start myip - запустили сервис;

> journalctl -xe - вывели информацию об полученной ошибке;

> systemctl status - ;

> systemctl restart myip - перезапуск сервиса, если были внесены какие-то изменения;

>  systemctl stop myip - остановка работы сервиса myip;

> ssh **lab03@192.168.23.152** - получили доступ из виртуальной машины в основную для удаленной работы;


---

#### Раздел 2. Ответы на вопросы

---

#### Раздел 3. Выводы

---

Таким образом, мы получили опыт в создании и управлении пользовательским сервисом, выполняющим bash
скрипт в Linux. 
